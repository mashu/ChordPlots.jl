<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Layout Configuration · ChordPlots.jl</title><meta name="title" content="Layout Configuration · ChordPlots.jl"/><meta property="og:title" content="Layout Configuration · ChordPlots.jl"/><meta property="twitter:title" content="Layout Configuration · ChordPlots.jl"/><meta name="description" content="Documentation for ChordPlots.jl."/><meta property="og:description" content="Documentation for ChordPlots.jl."/><meta property="twitter:description" content="Documentation for ChordPlots.jl."/><meta property="og:url" content="https://mashu.github.io/ChordPlots.jl/user_guide/layout/"/><meta property="twitter:url" content="https://mashu.github.io/ChordPlots.jl/user_guide/layout/"/><link rel="canonical" href="https://mashu.github.io/ChordPlots.jl/user_guide/layout/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ChordPlots.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting_started/">Getting Started</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../creating_data/">Creating Data</a></li><li><a class="tocitem" href="../basic_plotting/">Basic Plotting</a></li><li><a class="tocitem" href="../customization/">Customization</a></li><li><a class="tocitem" href="../filtering/">Filtering</a></li><li><a class="tocitem" href="../colors/">Color Schemes</a></li><li class="is-active"><a class="tocitem" href>Layout Configuration</a><ul class="internal"><li><a class="tocitem" href="#Custom-Layout"><span>Custom Layout</span></a></li><li><a class="tocitem" href="#Sorting-Options"><span>Sorting Options</span></a></li><li><a class="tocitem" href="#Consistent-Ordering-Across-Multiple-Plots"><span>Consistent Ordering Across Multiple Plots</span></a></li><li><a class="tocitem" href="#Accessing-Layout-Data"><span>Accessing Layout Data</span></a></li></ul></li><li><a class="tocitem" href="../comparison/">Comparing Matrices</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/basic/">Basic Example</a></li></ul></li><li><a class="tocitem" href="../../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Layout Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Layout Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mashu/ChordPlots.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mashu/ChordPlots.jl/blob/main/docs/src/user_guide/layout.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Layout-Configuration"><a class="docs-heading-anchor" href="#Layout-Configuration">Layout Configuration</a><a id="Layout-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Layout-Configuration" title="Permalink"></a></h1><p>Advanced control over chord diagram layout.</p><h2 id="Custom-Layout"><a class="docs-heading-anchor" href="#Custom-Layout">Custom Layout</a><a id="Custom-Layout-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Layout" title="Permalink"></a></h2><p>Compute layouts manually for advanced control:</p><pre><code class="language-julia hljs">config = LayoutConfig(
    inner_radius = 0.75,    # Ribbon attachment radius
    outer_radius = 1.0,     # Arc outer radius
    gap_fraction = 0.05,    # Gap between arcs
    arc_scale = 1.0,        # Fraction of width for arcs; &lt; 1 adds gaps between arcs/labels
    ribbon_width_power = 1.0, # Exponent for ribbon thickness; &gt; 1 makes thick vs thin more dramatic
    start_angle = π/2,      # Start at top (0 = right)
    direction = 1,          # 1 = counterclockwise, -1 = clockwise
    sort_by = :group        # :group, :value, or :none
)

layout = compute_layout(cooc, config)</code></pre><ul><li><strong><code>gap_fraction</code></strong>: Fraction of the full circle reserved for gaps (e.g. <code>0.05</code> → 5% gap, 95% for arcs).</li><li><strong><code>arc_scale</code></strong>: Scale factor for the arc (content) portion only; the rest is gap. With <code>arc_scale = 1.0</code> the arcs use all of the non-gap space; with <code>arc_scale &lt; 1</code> (e.g. <code>0.7</code>) arcs use less and gaps grow. So it does not conflict with <code>gap_fraction</code> — it adds extra separation on top of it.</li><li><strong><code>ribbon_width_power</code></strong>: Exponent for ribbon thickness: <code>(value/flow)^power</code>. Use &gt; 1 (e.g. <code>1.5</code> or <code>2</code>) to make thick ribbons thicker and thin ones thinner.</li></ul><p><strong>What is a custom layout?</strong> A custom layout allows you to control how labels are arranged around the circle, how arcs are sized, and the spacing between elements. This gives you fine-grained control over the visual appearance beyond the default settings.</p><img src="assets/examples/layout.png" alt="Custom Layout" style="max-width: 600px;"/><p><strong>What this shows:</strong> This example demonstrates several layout customizations applied together:</p><ul><li><strong><code>sort_by=:value</code></strong> - Labels are sorted by their total flow (largest first), so the most connected labels get the largest arcs and appear first. Compare this to the basic example where labels are sorted by group - here, the most important labels are visually emphasized.</li><li><strong><code>inner_radius=0.85</code></strong> - Ribbons start closer to the center (default is 0.92), creating more space between ribbon endpoints and the outer circle. This gives a different visual balance and can help when you have many connections.</li><li><strong><code>gap_fraction=0.05</code></strong> - Slightly larger gaps between arc segments (default is 0.03), making individual arcs more distinct and easier to identify.</li></ul><p>These settings work together to create a layout that emphasizes the most important labels and creates a different visual hierarchy compared to the default group-sorted layout.</p><h2 id="Sorting-Options"><a class="docs-heading-anchor" href="#Sorting-Options">Sorting Options</a><a id="Sorting-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Sorting-Options" title="Permalink"></a></h2><ul><li><code>:group</code> - Keep groups together, sort within groups by value (default)</li><li><code>:value</code> - Sort all labels by total flow (descending)</li><li><code>:none</code> - Use original order</li></ul><h2 id="Consistent-Ordering-Across-Multiple-Plots"><a class="docs-heading-anchor" href="#Consistent-Ordering-Across-Multiple-Plots">Consistent Ordering Across Multiple Plots</a><a id="Consistent-Ordering-Across-Multiple-Plots-1"></a><a class="docs-heading-anchor-permalink" href="#Consistent-Ordering-Across-Multiple-Plots" title="Permalink"></a></h2><p>When comparing chord diagrams from different data sources (e.g. different samples or donors), label order should be consistent so viewers can compare positions. There are two approaches:</p><h3 id="Approach-1:-expand_labels-(show-all-labels,-missing-ones-as-empty-arcs)"><a class="docs-heading-anchor" href="#Approach-1:-expand_labels-(show-all-labels,-missing-ones-as-empty-arcs)">Approach 1: <code>expand_labels</code> (show all labels, missing ones as empty arcs)</a><a id="Approach-1:-expand_labels-(show-all-labels,-missing-ones-as-empty-arcs)-1"></a><a class="docs-heading-anchor-permalink" href="#Approach-1:-expand_labels-(show-all-labels,-missing-ones-as-empty-arcs)" title="Permalink"></a></h3><p>Use <code>expand_labels</code> when you want <strong>all labels to appear in both plots</strong>, even if a label only exists in one matrix. Missing labels appear as empty arcs (zero flow, no ribbons).</p><pre><code class="language-julia hljs"># Two matrices with different genes
cooc_A = cooccurrence_matrix(df_A, [:V_call, :J_call])
cooc_B = cooccurrence_matrix(df_B, [:V_call, :J_call])

# Expand to union of labels (missing labels get zero flow → empty arcs)
exp_A, exp_B = expand_labels(cooc_A, cooc_B)

# Now both have the same labels; plot with consistent positions
order = label_order(exp_A)  # or label_order(exp_B) — same labels
chordplot!(ax1, exp_A; label_order = order)
chordplot!(ax2, exp_B; label_order = order)</code></pre><h3 id="Approach-2:-label_order-only-(each-plot-shows-only-its-own-labels)"><a class="docs-heading-anchor" href="#Approach-2:-label_order-only-(each-plot-shows-only-its-own-labels)">Approach 2: <code>label_order</code> only (each plot shows only its own labels)</a><a id="Approach-2:-label_order-only-(each-plot-shows-only-its-own-labels)-1"></a><a class="docs-heading-anchor-permalink" href="#Approach-2:-label_order-only-(each-plot-shows-only-its-own-labels)" title="Permalink"></a></h3><p>Use <code>label_order</code> alone when you want each plot to show <strong>only its own labels</strong>, but with shared labels in consistent positions. Labels unique to one matrix won&#39;t appear in the other plot.</p><pre><code class="language-julia hljs"># Get a unified order (union of labels, sorted by combined flow)
order = label_order(cooc_A, cooc_B)

# Plot with same positions for shared labels; unique labels only in their plot
chordplot!(ax1, cooc_A; label_order = order)
chordplot!(ax2, cooc_B; label_order = order)</code></pre><h3 id="Single-Matrix-Order-(reuse-from-one-plot)"><a class="docs-heading-anchor" href="#Single-Matrix-Order-(reuse-from-one-plot)">Single-Matrix Order (reuse from one plot)</a><a id="Single-Matrix-Order-(reuse-from-one-plot)-1"></a><a class="docs-heading-anchor-permalink" href="#Single-Matrix-Order-(reuse-from-one-plot)" title="Permalink"></a></h3><p>When matrices have the same labels, simply reuse the order from one:</p><pre><code class="language-julia hljs"># First plot
fig1, ax1, plt1 = chordplot(cooc_A)

# Extract and reuse its order for a comparable second plot
order = label_order(cooc_A)
fig2, ax2, plt2 = chordplot(cooc_B; label_order = order)</code></pre><h3 id="Options-for-label_order-with-Multiple-Matrices"><a class="docs-heading-anchor" href="#Options-for-label_order-with-Multiple-Matrices">Options for <code>label_order</code> with Multiple Matrices</a><a id="Options-for-label_order-with-Multiple-Matrices-1"></a><a class="docs-heading-anchor-permalink" href="#Options-for-label_order-with-Multiple-Matrices" title="Permalink"></a></h3><ul><li><strong><code>sort_by</code></strong>: <code>:group</code> (default), <code>:value</code>, or <code>:none</code> — how labels are sorted.</li><li><strong><code>include_all</code></strong>: If <code>true</code> (default), include <strong>all</strong> labels from any matrix. If <code>false</code>, include only labels present in <strong>all</strong> matrices (intersection).</li></ul><pre><code class="language-julia hljs"># Only labels that exist in BOTH matrices
order_common = label_order(cooc_A, cooc_B; include_all = false)

# Sort by total combined flow across both
order_by_value = label_order(cooc_A, cooc_B; sort_by = :value)</code></pre><h2 id="Accessing-Layout-Data"><a class="docs-heading-anchor" href="#Accessing-Layout-Data">Accessing Layout Data</a><a id="Accessing-Layout-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-Layout-Data" title="Permalink"></a></h2><pre><code class="language-julia hljs">layout = compute_layout(cooc)

# Get information
narcs(layout)      # Number of arcs
nribbons(layout)   # Number of ribbons

# Access arcs
for arc in layout.arcs
    println(&quot;Label $(arc.label_idx): $(arc.start_angle) to $(arc.end_angle)&quot;)
end

# Access ribbons
for ribbon in layout.ribbons
    println(&quot;Connection: $(ribbon.source.label_idx) → $(ribbon.target.label_idx), value: $(ribbon.value)&quot;)
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../colors/">« Color Schemes</a><a class="docs-footer-nextpage" href="../comparison/">Comparing Matrices »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 4 February 2026 15:04">Wednesday 4 February 2026</span>. Using Julia version 1.11.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
